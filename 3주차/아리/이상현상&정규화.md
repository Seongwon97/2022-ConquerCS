# 이상현상(Anomaly) & 정규화

## 이상현상 (Anomaly)

: 잘못된 테이블 설계로 인해 나타날 수 있는 부작용

- 삽입 이상 (Insertion Anomaly)
    - 불필요한 데이터 함께 저장해야만 데이터를 저장할 수 있는 것
    - ex) 학생 id와 수강과목 id를 pk로 가지는 경우 수강하는 과목이 없다면 데이터를 추가 불가
- 갱신 이상 (Update Anomaly)
    - 반복된 데이터 중에 일부만 갱신되는 것
    - ex) 전공명이 컴퓨터에서 컴퓨터과학으로 변경 → 일부만 변경된다면 문제 발생!
- 삭제 이상 (Deletion Anomaly)
    - 필요한 정보를 삭제해야만 데이터를 삭제할 수 있는 것
    - ex) 학생 id와 수강과목 id를 pk로 가지는 경우 수강을 철회한다면 학생 id도 함께 삭제
- 이러한 이상현상을 최소화하기위해 정규화를 진행하자~

## 정규화

: 하나의 테이블을 여러개의 테이블로 분해하여 데이터의 중복을 최소화하는 기법

- 장점
    - 무결성을 유지가능
    - 저장용량의 효율적 관리
    - 테이블을 논리적, 직관적으로 구성
    - 데이터베이스 확장에 용이
- 원칙
    - 정보의 무손실 : 분해되기 전의 정보를 모두 포함해야 한다.
    - 최소 데이터 중복 : 이상현상을 제거하고 데이터 중복을 최소화해야한다.
    - 분리의 원칙 : 하나의 독립된 관계성은 하나의 독립된 테이블로 분리해야한다.
- 정규화 과정
    - 제 1정규화
        - 모든 도메인은 원자값을 가진다. ( 데이터의 중복을 제거하는 것! )
        - 기본키를 사용하여 해당 데이터를 고유하게 식별할 수 있어야 한다.
    - 제 2정규화
        - 부분 함수적 종속 제거
        - 기본키가 2개 이상의 컬럼인 경우 두 컬럼 중 하나의 컬럼만으로 다른 컬럼을 결정지을 수 있으면 안된다.
    - 제 3정규화
        - 이행적 함수 종속 제거
        - A→B이고, B→C인 형태를 제거하는 것!
    - 이후 BCNF, 4 , 5까지 있지만 정규화 과정이 깊어질 수록 제약조건이 많아져 설계가 까다로워지기 때문에 3차까지만 하는 것이 기본적이다.
- 반정규화
    - 테이블 분해를 너무 많이 한다면 join 연산이 많아져 응답시간이 느려질 수 있다.
    - 이러한 성능 이슈를 해결하기 위해 의도적으로 정규화 법칙을 위햅하여 테이블을 통합하는 것이 반정규화이다.

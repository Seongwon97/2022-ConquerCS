# 저장 프로시저 (Stored Procedure)
- 프로시저는 여러 쿼리를 하나의 함수처럼 실행하기 위한 쿼리들의 집합이다. 즉, DB 내에서의 함수라고 생각하면 된다.
- 여러 SQL문을 묶어서 미리 정의해 두고 하나의 요청으로 실행할 수 있다. 이를 통해 자주 사용되는 복잡한 작업들을 간단하게 실행할 수 있다.
- 어플리케이션에서 직접 모든 작업을 요청하지 않아도 되기에 부하가 줄어들고 보안이 향상된다.
- 프로시저를 만들어두면 애플리케이션에서 여러 상황에 따라 해당 쿼리문이 필요할 때 인자 값만 전달하면 원하는 결과물을 쉽게 얻을 수 있다.

## 프로시저의 장점

1. 최적화 & 캐시

   프로시저는 최초로 실행될 때 최적화 상태로 컴파일이 되어 그 이후에는 프로시저 캐시에 저장된다. 이후 프로시저가 사용될 때는 컴파일 작업을 거치지 않고 캐시에서 가져오게 된다.

2. 유지 보수

   작업이 변경될 때 다른 작업은 건드리지 않고 프로시저 내부에서 수정만하면 된다.

   → 이것은 프로시저의 장점이자 단점이다.

3. 트래픽 감소

   쿼리를 다중으로 실행하는 경우, 한번의 호출을 통해 다중 쿼리를 실행할 수 있기에 네트워크에 대한 부담과 소요 시간을 줄일 수 있다.

4. 보안성 향상
    - 프로시저 단위로 실행 권한을 부여할 수 있기에 기본적인 보안 사고에 대처가 유연한 편이다.
    - 프로시저 내에서 참조 중인 테이블의 접근을 막을 수 있다.

## 프로시저의 단점

1. 호환성

   구문 규칙이 SQL / PSM 표준과의 호환성이 낮기 때문에 코드 자산으로의 재사용성이 나쁘다.

2. 성능

   성능이나 최적화가 부족하여 수행 능력이 떨어진다. 특히 문자 또는 숫자 연산에서는 프로그래밍 언어보다 효율이 좋지 않다. (비즈니스 로직에서 처리를 하는게 더 빠르다.)

3. 디버깅 및 유지보수의 어려움
    - 배포, 버전 관리 등에 대한 이력 관리가 힘들다. (별도의 Description 사용)
    - 에러가 발생했을 때 어디서 발생하였는지 이슈의 추적이 힘들다. (별도의 에러 테이블 사용)

## 트랜잭션 (Transaction)
- 데이터베이스의 상태를 변화시키기 위해 수행하는 최소 작업 단위
- 데이터베이스 상태 변화 -> 쿼리문을 통해 DB에 접근하는 것
- 하나의 트랜잭션에 속하는 작업들은 반드시 모두 수행되거나, 모두 수행되지 않거나. All or Nothing -> 데이터 부정합을 방지하기 위함
- DBMS의 성능은 TPS (Transaction Per Second, 초당 트랜잭션 실행 수) 로 평가

- Commit : 하나의 트랜잭션이 성공적으로 끝나고, DB가 일관성이 있을 때 이를 고지하는 연산
- Rollback : 하나의 트랜잭션이 비정상적으로 종료되어 원자성이 깨지면 `last consistent state`로 되돌린다. 

### 트랜잭션의 특성 (ACID)
  #### 원자성 (Atomicity) : 트랜잭션이 모두 DB에 반영되거나 / 전혀 반영되지 않아야 한다.
    - 트랜잭션 내에서 DB를 수정할 때, 수정 전 상태가 `롤백 이미지`로 `롤백 세그먼트` 영역에 임시 저장된다. 
    - 롤백 시 해당 영역의 상태로 복구됨 / 트랜잭션 commit 후에는 롤백 이미지가 삭제된다. 
    - 트랜잭션 범위 내에서 세이브포인트를 지정 가능. 사용자가 지정한 시점으로 롤백할 수 있다. 
  
  #### 일관성 (Consistency) : 트랜잭션의 작업 처리 결과는 항상 일관성 있어야 한다. 
    - 트랜잭션 전후의 DB 상태는 `Correct State` 이어야 한다. 
    - `Correct State` : 유효 범위, 무결성 등을 만족하는 정상 상태
    - 어떤 이벤트 또는 조건이 발생했을 때 트리거를 통해 DBMS가 자동적으로 수행할 동작을 명시 -> 일관성 보장
    
  #### 격리성 (Isolation) : 하나의 트랜잭션 연산에 다른 트랜잭션이 끼어들 수 없다. 
    - 트랜잭션은 기본적으로 원자성 / 일관성 / 지속성을 보장하지만, 격리성을 완벽히 보장하려면 병행 처리가 불가. 
    - 동시성 처리를 위해 격리 수준을 여러 단계로 나눈다. 
    
    - Read Uncommited : 다른 트랜잭션에서 커밋되지 않은 데이터를 읽을 수 있다. -> Dirty Read 위험
    - Read Commited : 커밋한 데이터만 조회 가능 -> Non-Repeatable Read 위험
    - Repeatable Read : 한번 조회한 데이터는 같은 트랜잭션에서 다시 조회해도 같은 데이터를 반환. -> Phantom Read 위험
    - Serialable : 가장 엄격한 격리성
    
    -> 일반적인 DB들은 동시성 처리를 위해 `Read Comitted` 수준의 격리성을 사용
    
    
  #### 지속성 (Durability) : 트랜잭션이 성공적으로 완료되었으면, 결과는 영구적으로 완료된다.  
    - 중간에 시스템 문제가 발생하면 DB log를 참고해서 성공한 트랜잭션을 복구. 
